    /**
    * o------------------------------------------------------------------------------o
    * | This file is part of the RGraph package - you can learn more at:             |
    * |                                                                              |
    * |                          http://www.rgraph.net                               |
    * |                                                                              |
    * | This package is licensed under the RGraph license. For all kinds of business |
    * | purposes there is a small one-time licensing fee to pay and for non          |
    * | commercial  purposes it is free to use. You can read the full license here:  |
    * |                                                                              |
    * |                      http://www.rgraph.net/LICENSE.txt                       |
    * o------------------------------------------------------------------------------o
    */

"undefined"==typeof RGraph&&(RGraph={});
RGraph.HProgress=function(k,m,n){this.id=k;this.max=n;this.value=m;this.canvas=document.getElementById("object"===typeof k?k.id:k);this.context=this.canvas.getContext("2d");this.canvas.__object__=this;this.type="hprogress";this.coords=[];this.isRGraph=!0;this.currentValue=null;this.uid=RGraph.CreateUID();this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID();this.colorsParsed=!1;this.coordsText=[];RGraph.OldBrowserCompat(this.context);this.properties={"chart.min":0,"chart.colors":"Gradient(white:#0c0) Gradient(white:red) Gradient(white:green) yellow pink cyan black white gray".split(" "),
"chart.strokestyle.inner":"#999","chart.strokestyle.outer":"#999","chart.tickmarks":!0,"chart.tickmarks.color":"#999","chart.tickmarks.inner":!1,"chart.tickmarks.zerostart":!0,"chart.gutter.left":25,"chart.gutter.right":25,"chart.gutter.top":25,"chart.gutter.bottom":25,"chart.numticks":10,"chart.numticks.inner":50,"chart.background.color":"#eee","chart.shadow":!1,"chart.shadow.color":"rgba(0,0,0,0.5)","chart.shadow.blur":3,"chart.shadow.offsetx":3,"chart.shadow.offsety":3,"chart.title":"","chart.title.background":null,
"chart.title.bold":!0,"chart.title.font":null,"chart.title.x":null,"chart.title.y":null,"chart.title.halign":null,"chart.title.valign":null,"chart.text.size":10,"chart.text.color":"black","chart.text.font":"Arial","chart.contextmenu":null,"chart.units.pre":"","chart.units.post":"","chart.tooltips":null,"chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.highlight":!0,"chart.tooltips.event":"onclick","chart.highlight.stroke":"rgba(0,0,0,0)","chart.highlight.fill":"rgba(255,255,255,0.7)",
"chart.annotatable":!1,"chart.annotate.color":"black","chart.zoom.factor":1.5,"chart.zoom.fade.in":!0,"chart.zoom.fade.out":!0,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":!0,"chart.zoom.background":!0,"chart.arrows":!1,"chart.margin":0,"chart.resizable":!1,"chart.resize.handle.adjust":[0,0],"chart.resize.handle.background":null,"chart.labels.specific":null,"chart.labels.count":10,"chart.adjustable":!1,"chart.scale.decimals":0,
"chart.scale.point":".","chart.scale.thousand":",","chart.key":null,"chart.key.background":"white","chart.key.position":"gutter","chart.key.halign":"right","chart.key.shadow":!1,"chart.key.shadow.color":"#666","chart.key.shadow.blur":3,"chart.key.shadow.offsetx":2,"chart.key.shadow.offsety":2,"chart.key.position.gutter.boxed":!1,"chart.key.position.x":null,"chart.key.position.y":null,"chart.key.color.shape":"square","chart.key.rounded":!0,"chart.key.linewidth":1,"chart.key.colors":null,"chart.key.color.shape":"square",
"chart.key.interactive":!1,"chart.key.interactive.highlight.chart.stroke":"black","chart.key.interactive.highlight.chart.fill":"rgba(255,255,255,0.7)","chart.key.interactive.highlight.label":"rgba(255,0,0,0.2)","chart.key.text.color":"black","chart.labels.position":"bottom","chart.events.mousemove":null,"chart.events.click":null,"chart.border.inner":!0};4==arguments.length?(this.min=arguments[1],this.max=arguments[2],this.value=arguments[3],this.properties["chart.min"]=arguments[1]):3==arguments.length&&
(this.min=0,this.max=arguments[2],this.value=arguments[1],this.properties["chart.min"]=0);if(this.canvas){for(var o=RGraph.array_linearize(m),i=0;i<o.length;++i)this["$"+i]={};this.canvas.__rgraph_aa_translated__||(this.context.translate(0.5,0.5),this.canvas.__rgraph_aa_translated__=!0);var f=RGraph,e=this.canvas,c=e.getContext("2d"),a=this.properties;this.Set=function(b,c){b=b.toLowerCase();b.substr(0,6)!="chart."&&(b="chart."+b);if(b=="chart.strokestyle"){this.Set("chart.strokestyle.inner",c);this.Set("chart.strokestyle.outer",
c)}else{a[b]=c;return this}};this.Get=function(b){b.substr(0,6)!="chart."&&(b="chart."+b);return a[b.toLowerCase()]};this.Draw=function(){f.FireCustomEvent(this,"onbeforedraw");if(!this.colorsParsed){this.parseColors();this.colorsParsed=true}this.currentValue=this.value;this.gutterLeft=a["chart.gutter.left"];this.gutterRight=a["chart.gutter.right"];this.gutterTop=a["chart.gutter.top"];this.gutterBottom=a["chart.gutter.bottom"];this.width=e.width-this.gutterLeft-this.gutterRight;this.height=e.height-
this.gutterTop-this.gutterBottom;this.coords=[];this.Drawbar();this.DrawTickMarks();this.DrawLabels();this.DrawTitle();c.stroke();c.fill();a["chart.bevel"]&&this.DrawBevel();a["chart.contextmenu"]&&f.ShowContext(this);a["chart.key"]&&a["chart.key"].length&&f.DrawKey(this,a["chart.key"],a["chart.colors"]);a["chart.resizable"]&&f.AllowResizing(this);f.InstallEventListeners(this);f.FireCustomEvent(this,"ondraw");return this};this.Drawbar=function(){this.scale2=f.getScale2(this,{max:this.max,min:this.min,
strict:true,"scale.thousand":a["chart.scale.thousand"],"scale.point":a["chart.scale.point"],"scale.decimals":a["chart.scale.decimals"],"ylabels.count":a["chart.labels.count"],"scale.round":a["chart.scale.round"],"units.pre":a["chart.units.pre"],"units.post":a["chart.units.post"]});a["chart.shadow"]&&f.SetShadow(this,a["chart.shadow.color"],a["chart.shadow.offsetx"],a["chart.shadow.offsety"],a["chart.shadow.blur"]);if(ISOLD&&a["chart.shadow"]){c.fillStyle=a["chart.shadow.color"];c.fillRect(this.gutterLeft+
a["chart.shadow.offsetx"],this.gutterTop+a["chart.shadow.offsety"],this.width,this.height)}c.fillStyle=a["chart.background.color"];c.strokeStyle=a["chart.strokestyle.outer"];c.strokeRect(this.gutterLeft,this.gutterTop,this.width,this.height);c.fillRect(this.gutterLeft,this.gutterTop,this.width,this.height);f.NoShadow(this);c.fillStyle=a["chart.colors"][0];c.strokeStyle=a["chart.strokestyle.outer"];var b=a["chart.margin"],j=Math.min(this.width,(f.array_sum(this.value)-a["chart.min"])/(this.max-a["chart.min"])*
this.width);if(a["chart.tickmarks.inner"]){var h=(e.width-this.gutterLeft-this.gutterRight)/a["chart.numticks.inner"];c.lineWidth=1;c.strokeStyle=a["chart.strokestyle.outer"];c.beginPath();for(var d=this.gutterLeft;d<e.width-this.gutterRight;d=d+h){c.moveTo(Math.round(d),this.gutterTop);c.lineTo(Math.round(d),this.gutterTop+2);c.moveTo(Math.round(d),e.height-this.gutterBottom);c.lineTo(Math.round(d),e.height-this.gutterBottom-2)}c.stroke()}if(typeof this.value=="number"){c.beginPath();c.strokeStyle=
a["chart.strokestyle.inner"];c.fillStyle=a["chart.colors"][0];a["chart.border.inner"]&&c.strokeRect(this.gutterLeft,this.gutterTop+b,j,this.height-b-b);c.fillRect(this.gutterLeft,this.gutterTop+b,j,this.height-b-b);this.coords.push([this.gutterLeft,this.gutterTop+b,j,this.height-b-b])}else if(typeof this.value=="object"){c.beginPath();c.strokeStyle=a["chart.strokestyle.inner"];d=this.gutterLeft;for(h=0;h<this.value.length;++h){var g=this.value[h]/f.array_sum(this.value)*j;c.fillStyle=a["chart.colors"][h];
a["chart.border.inner"]&&c.strokeRect(d,this.gutterTop+b,g,this.height-b-b);c.fillRect(d,this.gutterTop+b,g,this.height-b-b);this.coords.push([d,this.gutterTop+b,g,this.height-b-b]);d=d+g}}if(a["chart.arrows"]){d=this.gutterLeft+j;b=this.gutterTop;c.lineWidth=1;c.fillStyle="black";c.strokeStyle="black";c.beginPath();c.moveTo(d,b-3);c.lineTo(d+2,b-7);c.lineTo(d-2,b-7);c.closePath();c.stroke();c.fill();c.beginPath();c.moveTo(d,b+this.height+4);c.lineTo(d+2,b+this.height+9);c.lineTo(d-2,b+this.height+
9);c.closePath();c.stroke();c.fill()}if(a["chart.label.inner"]){c.fillStyle="black";f.Text2(this,{font:a["chart.text.font"],size:a["chart.text.size"]+2,x:this.gutterLeft+j+5,y:this.gutterTop+this.height/2,text:String(a["chart.units.pre"]+this.value+a["chart.units.post"]),valign:"bottom",halign:"left",bounding:true,boundingFill:"white",tag:"label.inner"})}};this.DrawTickMarks=function(){c.strokeStyle=a["chart.tickmarks.color"];if(a["chart.tickmarks"]){c.beginPath();this.tickInterval=this.width/a["chart.numticks"];
var b=a["chart.tickmarks.zerostart"]?0:this.tickInterval;if(a["chart.labels.position"]=="top")for(b=this.gutterLeft+b;b<=this.width+this.gutterLeft+0.1;b=b+this.tickInterval){c.moveTo(Math.round(b),this.gutterTop);c.lineTo(Math.round(b),this.gutterTop-4)}else for(b=this.gutterLeft+b;b<=this.width+this.gutterLeft+0.1;b=b+this.tickInterval){c.moveTo(Math.round(b),this.gutterTop+this.height);c.lineTo(Math.round(b),this.gutterTop+this.height+4)}c.stroke()}};this.DrawLabels=function(){if(!f.is_null(a["chart.labels.specific"]))return this.DrawSpecificLabels();
c.fillStyle=a["chart.text.color"];var b=a["chart.text.font"],j=a["chart.text.size"];i=0;for(len=this.scale2.labels.length;i<len;i++){if(a["chart.labels.position"]=="top")var h=this.width*(i/this.scale2.labels.length)+this.gutterLeft+this.width/this.scale2.labels.length,d=this.gutterTop-6,g="bottom";else{h=this.width*(i/this.scale2.labels.length)+this.gutterLeft+this.width/this.scale2.labels.length;d=this.height+this.gutterTop+4;g="top"}f.Text2(this,{font:b,size:j,x:h,y:d,text:this.scale2.labels[i],
valign:g,halign:"center",tag:"scale"})}a["chart.tickmarks.zerostart"]&&(a["chart.labels.position"]=="top"?f.Text2(this,{font:b,size:j,x:this.gutterLeft,y:this.gutterTop-6,text:a["chart.units.pre"]+Number(a["chart.min"]).toFixed(a["chart.scale.decimals"])+a["chart.units.post"],valign:"bottom",halign:"center",tag:"scale"}):f.Text2(this,{font:b,size:j,x:this.gutterLeft,y:e.height-this.gutterBottom+5,text:a["chart.units.pre"]+Number(a["chart.min"]).toFixed(a["chart.scale.decimals"])+a["chart.units.post"],
valign:"top",halign:"center",tag:"scale"}))};this.getShape=this.getBar=function(b){for(var c=f.getMouseXY(b),h=0;h<this.coords.length;h++){var c=f.getMouseXY(b),d=c[0],g=c[1],c=this.coords[h][0],e=this.coords[h][1],i=this.coords[h][2],k=this.coords[h][3],l=h;if(d>=c&&d<=c+i&&g>=e&&g<=e+k){b=f.parseTooltipText(a["chart.tooltips"],l);return{"0":this,1:c,2:e,3:i,4:k,5:l,object:this,x:c,y:e,width:i,height:k,index:l,tooltip:b}}}};this.getValue=function(b){var b=f.getMouseXY(b),c=(b[0]-this.gutterLeft)/
this.width,c=c*(this.max-a["chart.min"]),c=c+a["chart.min"];b[0]<this.gutterLeft&&(c=a["chart.min"]);if(b[0]>e.width-this.gutterRight)c=this.max;return c};this.Highlight=function(b){f.Highlight.Rect(this,b)};this.getObjectByXY=function(b){b=f.getMouseXY(b);if(b[0]>this.gutterLeft&&b[0]<e.width-this.gutterRight&&b[1]>this.gutterTop&&b[1]<e.height-this.gutterBottom)return this};this.Adjusting_mousemove=function(b){if(a["chart.adjustable"]&&f.Registry.Get("chart.adjusting")&&f.Registry.Get("chart.adjusting").uid==
this.uid){f.getMouseXY(b);b=this.getValue(b);if(typeof b=="number"){f.FireCustomEvent(this,"onadjust");this.value=Number(b.toFixed(a["chart.scale.decimals"]));f.Redraw()}}};this.DrawSpecificLabels=function(){var b=a["chart.labels.specific"];if(b){var j=a["chart.text.font"],h=a["chart.text.size"],d=a["chart.labels.position"]=="top"?"bottom":"top",g=this.width/(b.length-1);c.beginPath();c.fillStyle=a["chart.text.color"];for(var i=0;i<b.length;++i)f.Text2(this,{font:j,size:h,x:this.gutterLeft+g*i,y:a["chart.labels.position"]==
"top"?this.gutterTop-7:e.height-this.gutterBottom+7,text:b[i],valign:d,halign:"center",tag:"labels.specific"});c.fill()}};this.positionTooltip=function(b,a,c,d){var a=b.coords[d.__index__][0],g=b.coords[d.__index__][1],c=b.coords[d.__index__][2],b=f.getCanvasXY(b.canvas),e=d.offsetWidth,i=d.offsetHeight;d.style.left=0;d.style.top=b[1]+g-i-7+"px";d.style.overflow="";g=new Image;g.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAFCAYAAACjKgd3AAAARUlEQVQYV2NkQAN79+797+RkhC4M5+/bd47B2dmZEVkBCgcmgcsgbAaA9GA1BCSBbhAuA/AagmwQPgMIGgIzCD0M0AMMAEFVIAa6UQgcAAAAAElFTkSuQmCC";
g.style.position="absolute";g.id="__rgraph_tooltip_pointer__";g.style.top=d.offsetHeight-2+"px";d.appendChild(g);if(b[0]+a+c/2-e/2<10){d.style.left=b[0]+a-e*0.1+c/2+"px";g.style.left=e*0.1-8.5+"px"}else if(b[0]+c/2+a+e/2>document.body.offsetWidth){d.style.left=b[0]+a-e*0.9+c/2+"px";g.style.left=e*0.9-8.5+"px"}else{d.style.left=b[0]+a+c/2-e*0.5+"px";g.style.left=e*0.5-8.5+"px"}};this.getXCoord=function(b){var c=a["chart.min"];if(b<c||b>this.max)return null;b=(b-c)/(this.max-c)*(e.width-this.gutterLeft-
this.gutterRight);return b=this.gutterLeft+b};this.overChartArea=function(b){var a=RGraph.getMouseXY(b),b=a[0],a=a[1];return b>=this.gutterLeft&&b<=e.width-this.gutterRight&&a>=this.gutterTop&&a<=e.height-this.gutterBottom?true:false};this.parseColors=function(){for(var b=a["chart.colors"],c=0;c<b.length;++c)b[c]=this.parseSingleColorForGradient(b[c]);a["chart.tickmarks.color"]=this.parseSingleColorForGradient(a["chart.tickmarks.color"]);a["chart.strokestyle.inner"]=this.parseSingleColorForGradient(a["chart.strokestyle.inner"]);
a["chart.strokestyle.outer"]=this.parseSingleColorForGradient(a["chart.strokestyle.outer"]);a["chart.highlight.fill"]=this.parseSingleColorForGradient(a["chart.highlight.fill"]);a["chart.highlight.stroke"]=this.parseSingleColorForGradient(a["chart.highlight.stroke"]);a["chart.background.color"]=this.parseSingleColorForGradient(a["chart.background.color"])};this.parseSingleColorForGradient=function(b){if(!b||typeof b!="string")return b;if(b.match(/^gradient\((.*)\)$/i)){var j=RegExp.$1.split(":"),
h=c.createLinearGradient(a["chart.gutter.left"],0,e.width-a["chart.gutter.right"],0),d=1/(j.length-1);h.addColorStop(0,f.trim(j[0]));for(var g=1;g<j.length;++g)h.addColorStop(g*d,f.trim(j[g]))}return h?h:b};this.DrawBevel=function(){for(var b=0,a=0;b<this.coords.length;++b)a=a+this.coords[b][2];c.save();c.beginPath();c.rect(this.coords[0][0],this.coords[0][1],a,this.coords[0][3]);c.clip();c.beginPath();c.shadowColor="black";c.shadowOffsetX=0;c.shadowOffsetY=0;c.shadowBlur=15;c.lineWidth=2;c.rect(this.coords[0][0]-
1,this.coords[0][1]-1,a+2,this.coords[0][3]+2);c.stroke();c.restore()};this.DrawTitle=function(){if(a["chart.title"].length){var b=(e.width-this.gutterLeft-this.gutterRight)/2+this.gutterLeft,c=a["chart.title"],h=a["chart.title.size"]?a["chart.title.size"]:a["chart.text.size"]+2,d=a["chart.title.font"]?a["chart.title.font"]:a["chart.text.font"];if(a["chart.labels.position"]=="top"){y=e.height-this.gutterBottom+5;b=(e.width-this.gutterLeft-this.gutterRight)/2+this.gutterLeft;valign="top"}else{b=(e.width-
this.gutterLeft-this.gutterRight)/2+this.gutterLeft;y=this.gutterTop-5;valign="bottom"}f.Text2(this,{font:d,size:h,x:typeof a["chart.title.x"]=="number"?a["chart.title.x"]:b,y:typeof a["chart.title.y"]=="number"?a["chart.title.y"]:y,text:c,valign:a["chart.title.valign"]?a["chart.title.valign"]:valign,halign:a["chart.title.halign"]?a["chart.title.halign"]:"center",bold:a["chart.title.bold"],bounding:a["chart.title.background"]?true:false,boundingFill:a["chart.title.background"],tag:"title"})}};this.interactiveKeyHighlight=
function(b){b=this.coords[b];c.beginPath();c.strokeStyle=a["chart.key.interactive.highlight.chart.stroke"];c.lineWidth=2;c.fillStyle=a["chart.key.interactive.highlight.chart.fill"];c.rect(b[0],b[1],b[2],b[3]);c.fill();c.stroke();c.lineWidth=1};f.Register(this)}else alert("[HPROGRESS] No canvas support")};
