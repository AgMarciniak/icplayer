    /**
    * o------------------------------------------------------------------------------o
    * | This file is part of the RGraph package - you can learn more at:             |
    * |                                                                              |
    * |                          http://www.rgraph.net                               |
    * |                                                                              |
    * | This package is licensed under the RGraph license. For all kinds of business |
    * | purposes there is a small one-time licensing fee to pay and for non          |
    * | commercial  purposes it is free to use. You can read the full license here:  |
    * |                                                                              |
    * |                      http://www.rgraph.net/license                           |
    * o------------------------------------------------------------------------------o
    */

"undefined"==typeof RGraph&&(RGraph={});
RGraph.Bar=function(m,o){this.id=m;this.canvas=document.getElementById("object"===typeof m?m.id:m);this.context=this.canvas.getContext?this.canvas.getContext("2d"):null;this.canvas.__object__=this;this.type="bar";this.max=0;this.stackedOrGrouped=!1;this.isRGraph=!0;this.uid=RGraph.CreateUID();this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID();this.colorsParsed=!1;RGraph.OldBrowserCompat(this.context);this.properties={"chart.background.barcolor1":"rgba(0,0,0,0)","chart.background.barcolor2":"rgba(0,0,0,0)",
"chart.background.grid":!0,"chart.background.grid.color":"#ddd","chart.background.grid.width":1,"chart.background.grid.hsize":20,"chart.background.grid.vsize":20,"chart.background.grid.vlines":!0,"chart.background.grid.hlines":!0,"chart.background.grid.border":!0,"chart.background.grid.autofit":!0,"chart.background.grid.autofit.numhlines":5,"chart.background.grid.autofit.numvlines":20,"chart.background.grid.dashed":!1,"chart.background.grid.dotted":!1,"chart.background.image.stretch":!0,"chart.background.image.x":null,
"chart.background.image.y":null,"chart.background.image.w":null,"chart.background.image.h":null,"chart.background.image.align":null,"chart.numyticks":10,"chart.hmargin":5,"chart.hmargin.grouped":1,"chart.strokecolor":"rgba(0,0,0,0)","chart.axis.color":"black","chart.axis.linewidth":1,"chart.gutter.top":25,"chart.gutter.bottom":25,"chart.gutter.left":25,"chart.gutter.right":25,"chart.labels":null,"chart.labels.ingraph":null,"chart.labels.above":!1,"chart.labels.above.decimals":0,"chart.labels.above.size":null,
"chart.labels.above.color":null,"chart.labels.above.angle":null,"chart.ylabels":!0,"chart.ylabels.count":5,"chart.ylabels.inside":!1,"chart.xlabels.offset":0,"chart.xaxispos":"bottom","chart.yaxispos":"left","chart.text.angle":0,"chart.text.color":"black","chart.text.size":10,"chart.text.font":"Arial","chart.ymin":0,"chart.ymax":null,"chart.title":"","chart.title.font":null,"chart.title.background":null,"chart.title.hpos":null,"chart.title.vpos":null,"chart.title.bold":!0,"chart.title.xaxis":"","chart.title.xaxis.bold":!0,
"chart.title.xaxis.size":null,"chart.title.xaxis.font":null,"chart.title.yaxis":"","chart.title.yaxis.bold":!0,"chart.title.yaxis.size":null,"chart.title.yaxis.font":null,"chart.title.yaxis.color":null,"chart.title.xaxis.pos":null,"chart.title.yaxis.pos":null,"chart.title.yaxis.x":null,"chart.title.yaxis.y":null,"chart.title.xaxis.x":null,"chart.title.xaxis.y":null,"chart.title.x":null,"chart.title.y":null,"chart.title.halign":null,"chart.title.valign":null,"chart.colors":"#01B4FF #0f0 #00f #ff0 #0ff #0f0".split(" "),
"chart.colors.sequential":!1,"chart.colors.reverse":!1,"chart.grouping":"grouped","chart.variant":"bar","chart.variant.sketch.verticals":!0,"chart.shadow":!1,"chart.shadow.color":"#999","chart.shadow.offsetx":3,"chart.shadow.offsety":3,"chart.shadow.blur":3,"chart.tooltips":null,"chart.tooltips.effect":"fade","chart.tooltips.css.class":"RGraph_tooltip","chart.tooltips.event":"onclick","chart.tooltips.highlight":!0,"chart.highlight.stroke":"rgba(0,0,0,0)","chart.highlight.fill":"rgba(255,255,255,0.7)",
"chart.background.hbars":null,"chart.key":null,"chart.key.background":"white","chart.key.position":"graph","chart.key.shadow":!1,"chart.key.shadow.color":"#666","chart.key.shadow.blur":3,"chart.key.shadow.offsetx":2,"chart.key.shadow.offsety":2,"chart.key.position.gutter.boxed":!1,"chart.key.position.x":null,"chart.key.position.y":null,"chart.key.interactive":!1,"chart.key.interactive.highlight.chart.stroke":"black","chart.key.interactive.highlight.chart.fill":"rgba(255,255,255,0.7)","chart.key.interactive.highlight.label":"rgba(255,0,0,0.2)",
"chart.key.halign":"right","chart.key.color.shape":"square","chart.key.rounded":!0,"chart.key.text.size":10,"chart.key.linewidth":1,"chart.key.colors":null,"chart.key.text.color":"black","chart.contextmenu":null,"chart.units.pre":"","chart.units.post":"","chart.scale.decimals":0,"chart.scale.point":".","chart.scale.thousand":",","chart.crosshairs":!1,"chart.crosshairs.color":"#333","chart.crosshairs.hline":!0,"chart.crosshairs.vline":!0,"chart.linewidth":1,"chart.annotatable":!1,"chart.annotate.color":"black",
"chart.zoom.factor":1.5,"chart.zoom.fade.in":!0,"chart.zoom.fade.out":!0,"chart.zoom.hdir":"right","chart.zoom.vdir":"down","chart.zoom.frames":25,"chart.zoom.delay":16.666,"chart.zoom.shadow":!0,"chart.zoom.background":!0,"chart.resizable":!1,"chart.resize.handle.background":null,"chart.adjustable":!1,"chart.noaxes":!1,"chart.noxaxis":!1,"chart.noyaxis":!1,"chart.events.click":null,"chart.events.mousemove":null,"chart.numxticks":null,"chart.bevel":!1};if(this.canvas){for(var d=0;d<o.length;++d)"object"==
typeof o[d]&&!RGraph.is_null(o[d])&&(this.stackedOrGrouped=!0);for(var B=RGraph.array_linearize(o),d=0;d<B.length;++d)this["$"+d]={};this.data=o;this.coords=[];this.coords2=[];this.coordsText=[];this.data_arr=RGraph.array_linearize(this.data);this.canvas.__rgraph_aa_translated__||(this.context.translate(0.5,0.5),this.canvas.__rgraph_aa_translated__=!0);var s=RGraph,f=this.canvas,i=f.getContext("2d"),h=this.properties;this.Set=function(c,a){c=c.toLowerCase();c.substr(0,6)!="chart."&&(c="chart."+c);
c=="chart.labels.abovebar"&&(c="chart.labels.above");c=="chart.strokestyle"&&(c="chart.strokecolor");if(c=="chart.xaxispos"){if(a!="bottom"&&a!="center"&&a!="top"){alert("[BAR] ("+this.id+") chart.xaxispos should be top, center or bottom. Tried to set it to: "+a+" Changing it to center");a="center"}if(a=="top")for(var b=0;b<this.data.length;++b)typeof this.data[b]=="number"&&this.data[b]>0&&alert("[BAR] The data element with index "+b+" should be negative")}c.toLowerCase()=="chart.linewidth"&&a==
0&&(a=1E-4);h[c]=a;return this};this.Get=function(c){c.substr(0,6)!="chart."&&(c="chart."+c);return h[c]};this.Draw=function(){typeof h["chart.background.image"]=="string"&&s.DrawBackgroundImage(this);s.FireCustomEvent(this,"onbeforedraw");if(!this.colorsParsed){this.parseColors();this.colorsParsed=true}this.gutterLeft=h["chart.gutter.left"];this.gutterRight=h["chart.gutter.right"];this.gutterTop=h["chart.gutter.top"];this.gutterBottom=h["chart.gutter.bottom"];(h["chart.variant"]=="pyramid"||h["chart.variant"]==
"dot")&&(typeof h["chart.tooltips"]=="object"&&h["chart.tooltips"]&&h["chart.tooltips"].length>0)&&alert("[BAR] ("+this.id+") Sorry, tooltips are not supported with dot or pyramid charts");this.coords=[];this.coords2=[];this.coordsText=[];this.max=0;this.grapharea=f.height-this.gutterTop-this.gutterBottom;this.halfgrapharea=this.grapharea/2;this.halfTextHeight=h["chart.text.size"]/2;s.background.Draw(this);if(h["chart.variant"]=="sketch"){this.DrawAxes();this.Drawbars()}else{this.Drawbars();this.DrawAxes()}this.DrawLabels();
(h["chart.bevel"]||h["chart.bevelled"])&&this.DrawBevel();h["chart.key"]&&h["chart.key"].length&&s.DrawKey(this,h["chart.key"],h["chart.colors"]);h["chart.contextmenu"]&&s.ShowContext(this);h["chart.labels.ingraph"]&&s.DrawInGraphLabels(this);h["chart.resizable"]&&s.AllowResizing(this);s.InstallEventListeners(this);s.FireCustomEvent(this,"ondraw");return this};this.DrawAxes=function(){if(!h["chart.noaxes"]){var c=h["chart.xaxispos"],a=h["chart.yaxispos"],b=h["chart.variant"]=="sketch";i.beginPath();
i.strokeStyle=h["chart.axis.color"];i.lineWidth=h["chart.axis.linewidth"]+0.001;if(ISSAFARI==-1)i.lineCap="square";if(h["chart.noyaxis"]==false)if(a=="right"){i.moveTo(f.width-this.gutterRight+(b?3:0),this.gutterTop-(b?3:0));i.lineTo(f.width-this.gutterRight-(b?2:0),f.height-this.gutterBottom+(b?5:0))}else{i.moveTo(this.gutterLeft-(b?2:0),this.gutterTop-(b?5:0));i.lineTo(this.gutterLeft-(b?1:0),f.height-this.gutterBottom+(b?5:0))}if(h["chart.noxaxis"]==false)if(c=="center"){i.moveTo(this.gutterLeft-
(b?5:0),Math.round((f.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop+(b?2:0)));i.lineTo(f.width-this.gutterRight+(b?5:0),Math.round((f.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-(b?2:0)))}else if(c=="top"){i.moveTo(this.gutterLeft-(b?3:0),this.gutterTop-(b?3:0));i.lineTo(f.width-this.gutterRight+(b?5:0),this.gutterTop+(b?2:0))}else{i.moveTo(this.gutterLeft-(b?5:0),f.height-this.gutterBottom-(b?2:0));i.lineTo(f.width-this.gutterRight+(b?8:0),f.height-this.gutterBottom+(b?
2:0))}var g=h["chart.numyticks"];if(h["chart.noyaxis"]==false&&!b){var g=(f.height-this.gutterTop-this.gutterBottom)/g,t=a=="left"?this.gutterLeft:f.width-this.gutterRight;if(this.properties["chart.numyticks"]>0)for(y=this.gutterTop;c=="center"?y<=f.height-this.gutterBottom:y<f.height-this.gutterBottom+(c=="top"?1:0);y=y+g)if(!(c=="center"&&y==this.gutterTop+this.grapharea/2)&&!(c=="top"&&y==this.gutterTop)){i.moveTo(t+0,Math.round(y));i.lineTo(t+(a=="left"?-3:3),Math.round(y))}if(h["chart.noxaxis"])if(c==
"center"){i.moveTo(t+(a=="left"?-3:3),Math.round(f.height/2));i.lineTo(t,Math.round(f.height/2))}else if(c=="top"){i.moveTo(t+(a=="left"?-3:3),Math.round(this.gutterTop));i.lineTo(t,Math.round(this.gutterTop))}else{i.moveTo(t+(a=="left"?-3:3),Math.round(f.height-this.gutterBottom));i.lineTo(t,Math.round(f.height-this.gutterBottom))}}if(h["chart.noxaxis"]==false&&!b){b=typeof h["chart.numxticks"]=="number"?(f.width-this.gutterLeft-this.gutterRight)/h["chart.numxticks"]:(f.width-this.gutterLeft-this.gutterRight)/
this.data.length;if(c=="bottom"){yStart=f.height-this.gutterBottom;yEnd=f.height-this.gutterBottom+3}else if(c=="top"){yStart=this.gutterTop-3;yEnd=this.gutterTop}else if(c=="center"){yStart=(f.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop+3;yEnd=(f.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-3}g=h["chart.noendxtick"];x=this.gutterLeft+(a=="left"?b:0);for(len=f.width-this.gutterRight+(a=="left"?5:0);x<len;x=x+b)if(a=="left"&&!g&&x>this.gutterLeft){i.moveTo(Math.round(x),
yStart);i.lineTo(Math.round(x),yEnd)}else if(a=="left"&&g&&x>this.gutterLeft&&x<f.width-this.gutterRight){i.moveTo(Math.round(x),yStart);i.lineTo(Math.round(x),yEnd)}else if(a=="right"&&x<f.width-this.gutterRight&&!g){i.moveTo(Math.round(x),yStart);i.lineTo(Math.round(x),yEnd)}else if(a=="right"&&x<f.width-this.gutterRight&&x>this.gutterLeft&&g){i.moveTo(Math.round(x),yStart);i.lineTo(Math.round(x),yEnd)}if((h["chart.noyaxis"]||h["chart.numxticks"]==null)&&typeof h["chart.numxticks"]=="number"&&h["chart.numxticks"]>
0){i.moveTo(Math.round(this.gutterLeft),yStart);i.lineTo(Math.round(this.gutterLeft),yEnd)}}if(h["chart.noyaxis"]&&h["chart.noxaxis"]==false&&h["chart.numxticks"]==null)if(c=="center"){i.moveTo(Math.round(this.gutterLeft),f.height/2-3);i.lineTo(Math.round(this.gutterLeft),f.height/2+3)}else{i.moveTo(Math.round(this.gutterLeft),f.height-this.gutterBottom);i.lineTo(Math.round(this.gutterLeft),f.height-this.gutterBottom+3)}i.stroke()}};this.Drawbars=function(){var c=this.canvas,a=this.context,b=this.properties;
a.lineWidth=b["chart.linewidth"];a.strokeStyle=b["chart.strokecolor"];a.fillStyle=b["chart.colors"][0];if(b["chart.ymax"])this.scale2=RGraph.getScale2(this,{max:b["chart.ymax"],strict:true,min:b["chart.ymin"],"scale.thousand":b["chart.scale.thousand"],"scale.point":b["chart.scale.point"],"scale.decimals":b["chart.scale.decimals"],"ylabels.count":b["chart.ylabels.count"],"scale.round":b["chart.scale.round"],"units.pre":b["chart.units.pre"],"units.post":b["chart.units.post"]});else{for(d=0;d<this.data.length;++d){var g=
typeof this.data[d]=="object"?b["chart.grouping"]=="grouped"?Number(RGraph.array_max(this.data[d],true)):Number(RGraph.array_sum(this.data[d])):Number(this.data[d]);this.max=Math.max(Math.abs(this.max),Math.abs(g))}this.scale2=RGraph.getScale2(this,{max:this.max,min:b["chart.ymin"],"scale.thousand":b["chart.scale.thousand"],"scale.point":b["chart.scale.point"],"scale.decimals":b["chart.scale.decimals"],"ylabels.count":b["chart.ylabels.count"],"scale.round":b["chart.scale.round"],"units.pre":b["chart.units.pre"],
"units.post":b["chart.units.post"]});this.max=this.scale2.max}b["chart.adjustable"]&&!b["chart.ymax"]&&this.Set("chart.ymax",this.scale2.max);b["chart.background.hbars"]&&b["chart.background.hbars"].length>0&&RGraph.DrawBars(this);g=b["chart.variant"];g=="3d"&&s.Draw3DAxes(this);var t=b["chart.xaxispos"],u=(c.width-this.gutterLeft-this.gutterRight)/this.data.length,e=b["chart.hmargin"],h=b["chart.shadow"],i=b["chart.shadow.color"],E=b["chart.shadow.blur"],f=b["chart.shadow.offsetx"],F=b["chart.shadow.offsety"],
o=b["chart.strokecolor"],m=b["chart.colors"],B=0;d=0;for(len=this.data.length;d<len;d=d+1){var l=(RGraph.array_sum(this.data[d])<0?RGraph.array_sum(this.data[d])+this.scale2.min:RGraph.array_sum(this.data[d])-this.scale2.min)/(this.scale2.max-this.scale2.min)*(c.height-this.gutterTop-this.gutterBottom);t=="center"&&(l=l/2);var p=d*u+this.gutterLeft,j=t=="center"?(c.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop-l:c.height-l-this.gutterBottom;t=="top"&&(j=this.gutterTop+Math.abs(l));if(l<
0){j=j+l;l=Math.abs(l)}if(h){a.shadowColor=i;a.shadowBlur=E;a.shadowOffsetX=f;a.shadowOffsetY=F}a.beginPath();if(typeof this.data[d]=="number"){var n=u-2*e;n<0&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient.");a.strokeStyle=o;a.fillStyle=m[0];if(b["chart.colors.sequential"])a.fillStyle=m[d];if(g=="sketch"){a.lineCap="round";a.beginPath();a.strokeStyle=m[0];if(b["chart.colors.sequential"])a.strokeStyle=
m[d];a.moveTo(p+e+2,j+l-2);a.lineTo(p+e-1,j-4);a.moveTo(p+e-3,j+-2+(this.data[d]<0?l:0));a.bezierCurveTo(p+(e+u)*0.33,j+15+(this.data[d]<0?l-10:0),p+(e+u)*0.66,j+5+(this.data[d]<0?l-10:0),p+e+u+-1,j+0+(this.data[d]<0?l:0));a.moveTo(p+e+u-5,j-5);a.lineTo(p+e+u-3,j+l-3);if(b["chart.variant.sketch.verticals"])for(var q=0.2;q<=0.8;q=q+0.2){a.moveTo(p+e+u+(q>0.4?-1:3)-q*u,j-1);a.lineTo(p+e+u-(q>0.4?1:-1)-q*u,j+l+(q==0.2?1:-2))}a.stroke()}else if(g=="bar"||g=="3d"||g=="glass"||g=="bevel"){RGraph.isOld()&&
h&&this.DrawIEShadow([p+e,j,n,l]);if(g=="glass"){RGraph.filledCurvyRect(a,p+e,j,n,l,3,this.data[d]>0,this.data[d]>0,this.data[d]<0,this.data[d]<0);RGraph.strokedCurvyRect(a,p+e,j,n,l,3,this.data[d]>0,this.data[d]>0,this.data[d]<0,this.data[d]<0)}else{a.beginPath();a.rect(p+e,j,n,l);a.fill();s.NoShadow(this);a.beginPath();a.rect(p+e,j,n,l);a.stroke()}if(g=="3d"){var A=a.strokeStyle,C=a.fillStyle;a.beginPath();a.moveTo(p+e,j);a.lineTo(p+e+10,j-5);a.lineTo(p+e+10+n,j-5);a.lineTo(p+e+n,j);a.closePath();
a.stroke();a.fill();a.beginPath();a.moveTo(p+e+n,j);a.lineTo(p+e+n+10,j-5);a.lineTo(p+e+n+10,j+l-5);a.lineTo(p+e+n,j+l);a.closePath();a.stroke();a.fill();a.beginPath();a.fillStyle="rgba(255,255,255,0.3)";a.moveTo(p+e,j);a.lineTo(p+e+10,j-5);a.lineTo(p+e+10+n,j-5);a.lineTo(p+e+n,j);a.lineTo(p+e,j);a.closePath();a.stroke();a.fill();a.beginPath();a.fillStyle="rgba(0,0,0,0.4)";a.moveTo(p+e+n,j);a.lineTo(p+e+n+10,j-5);a.lineTo(p+e+n+10,j-5+l);a.lineTo(p+e+n,j+l);a.lineTo(p+e+n,j);a.closePath();a.stroke();
a.fill();a.strokeStyle=A;a.fillStyle=C}else if(g=="glass"){q=a.createLinearGradient(p+e,j,p+e+n/2,j);q.addColorStop(0,"rgba(255,255,255,0.9)");q.addColorStop(1,"rgba(255,255,255,0.5)");a.beginPath();a.fillStyle=q;a.fillRect(p+e+2,j+(this.data[d]>0?2:0),n/2-2,l-2);a.fill()}if(b["chart.labels.above"]){h&&RGraph.NoShadow(this);A=j-3;q=p+e+n/2;this.data[d]<0&&(A=A+(l+6+b["chart.text.size"]));b["chart.xaxispos"]=="top"&&(A=this.gutterTop+l+6+(typeof b["chart.labels.above.size"]=="number"?b["chart.labels.above.size"]:
b["chart.text.size"]-4));if(b["chart.variant"]=="3d"){A=A-3;q=q+5}if(this.properties["chart.labels.above.angle"])var C=-45,z="left",D="center";else{C=0;z="center";D="bottom"}a.fillStyle=typeof this.properties["chart.labels.above.color"]=="string"?b["chart.labels.above.color"]:b["chart.text.color"];RGraph.Text2(this,{font:b["chart.text.font"],size:typeof b["chart.labels.above.size"]=="number"?b["chart.labels.above.size"]:b["chart.text.size"]-3,x:q,y:A,text:RGraph.number_format(this,Number(this.data[d]).toFixed(b["chart.labels.above.decimals"]),
b["chart.units.pre"],b["chart.units.post"]),halign:z,marker:false,valign:D,angle:C,tag:"labels.above"})}}else if(g=="dot"){a.beginPath();a.moveTo(p+u/2,j);a.lineTo(p+u/2,j+l);a.stroke();a.beginPath();a.fillStyle=this.properties["chart.colors"][d];a.arc(p+u/2,j+(this.data[d]>0?0:l),2,0,6.28,0);a.fillStyle=b["chart.colors"][0];if(b["chart.colors.sequential"])a.fillStyle=m[d];a.stroke();a.fill()}else alert("[BAR] Warning! Unknown chart.variant: "+g);this.coords.push([p+e,j,u-2*e,l]);typeof this.coords2[d]==
"undefined"&&(this.coords2[d]=[]);this.coords2[d].push([p+e,j,u-2*e,l])}else if(this.data[d]&&typeof this.data[d]=="object"&&b["chart.grouping"]=="stacked"){this.scale2.min&&alert("[ERROR] Stacked Bar charts with a Y min are not supported");var n=u-2*e,q=[],v=0,z=this.data[d];n<0&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient.");for(w=0;w<z.length;++w){if(t=="center"){alert("[BAR] It's pointless having the X axis position at the center on a stacked bar chart.");
return}if(this.data[d][w]<0){alert("[BAR] Negative values are not permitted with a stacked bar chart. Try a grouped one instead.");return}a.strokeStyle=o;a.fillStyle=m[w];if(b["chart.colors.reverse"])a.fillStyle=m[this.data[d].length-w-1];if(b["chart.colors.sequential"]&&m[B])a.fillStyle=m[B++];else if(b["chart.colors.sequential"])a.fillStyle=m[B-1];l=z[w]/this.scale2.max*(c.height-this.gutterTop-this.gutterBottom);t=="center"&&(l=l/2);RGraph.array_sum(z);this.coords.push([p+e,j,u-2*e,l]);typeof this.coords2[d]==
"undefined"&&(this.coords2[d]=[]);this.coords2[d].push([p+e,j,u-2*e,l]);RGraph.isOld()&&h&&this.DrawIEShadow([p+e,j,u-2*e,l+1]);if(l>0){a.strokeRect(p+e,j,u-2*e,l);a.fillRect(p+e,j,u-2*e,l)}if(w==0)var v=j,r=p;h&&q.push([p+e,j,u-2*e,l,a.fillStyle]);if(g=="3d"){C=a.fillStyle;A=a.strokeStyle;if(w==0){a.beginPath();a.moveTo(r+e,j);a.lineTo(r+10+e,j-5);a.lineTo(r+10+n+e,j-5);a.lineTo(r+n+e,j);a.closePath();a.fill();a.stroke()}a.beginPath();a.moveTo(r+n+e,j);a.lineTo(r+n+e+10,j-5);a.lineTo(r+n+e+10,j-
5+l);a.lineTo(r+n+e,j+l);a.closePath();a.fill();a.stroke();if(w==0){a.fillStyle="rgba(255,255,255,0.3)";a.beginPath();a.moveTo(r+e,j);a.lineTo(r+10+e,j-5);a.lineTo(r+10+n+e,j-5);a.lineTo(r+n+e,j);a.closePath();a.fill();a.stroke()}a.fillStyle="rgba(0,0,0,0.4)";a.beginPath();a.moveTo(r+n+e,j);a.lineTo(r+n+e+10,j-5);a.lineTo(r+n+e+10,j-5+l);a.lineTo(r+n+e,j+l);a.closePath();a.fill();a.stroke();a.strokeStyle=A;a.fillStyle=C}j=j+l}if(b["chart.labels.above"]){s.NoShadow(this);a.fillStyle=typeof this.properties["chart.labels.above.color"]==
"string"?b["chart.labels.above.color"]:b["chart.text.color"];if(b["chart.labels.above.angle"]){C=-45;z="left";D="center"}else{C=0;z="center";D="bottom"}RGraph.Text2(this,{font:b["chart.text.font"],size:typeof b["chart.labels.above.size"]=="number"?b["chart.labels.above.size"]:b["chart.text.size"]-3,x:r+n/2+b["chart.hmargin"],y:v-(b["chart.shadow"]&&b["chart.shadow.offsety"]<0?7:4)-(b["chart.variant"]=="3d"?5:0),text:String(b["chart.units.pre"]+RGraph.array_sum(this.data[d]).toFixed(b["chart.labels.above.decimals"])+
b["chart.units.post"]),angle:C,valign:D,halign:z,tag:"labels.above"});if(h){a.shadowColor=i;a.shadowBlur=E;a.shadowOffsetX=f;a.shadowOffsetY=F}}if(h){RGraph.NoShadow(this);for(k=0;k<q.length;++k){a.strokeStyle=o;a.fillStyle=q[k][4];a.strokeRect(q[k][0],q[k][1],q[k][2],q[k][3]);a.fillRect(q[k][0],q[k][1],q[k][2],q[k][3]);a.stroke();a.fill()}}}else if(this.data[d]&&typeof this.data[d]=="object"&&b["chart.grouping"]=="grouped"){q=[];a.lineWidth=b["chart.linewidth"];for(w=0;w<this.data[d].length;++w){a.strokeStyle=
o;a.fillStyle=m[w];if(b["chart.colors.sequential"]&&m[B])a.fillStyle=m[B++];else if(b["chart.colors.sequential"])a.fillStyle=m[B-1];n=(u-2*e)/this.data[d].length;l=(this.data[d][w]+(this.data[d][w]<0?this.scale2.min:-1*this.scale2.min))/(this.scale2.max-this.scale2.min)*(c.height-this.gutterTop-this.gutterBottom);z=b["chart.hmargin.grouped"];r=p+e+w*n;n<0&&alert("[RGRAPH] Warning: you have a negative bar width. This may be caused by the chart.hmargin being too high or the width of the canvas not being sufficient.");
t=="center"&&(l=l/2);if(t=="top"){v=this.gutterTop;l=Math.abs(l)}else if(t=="center")v=this.gutterTop+this.grapharea/2-l;else{v=c.height-this.gutterBottom-l;l=Math.abs(l)}RGraph.isOld()&&h&&this.DrawIEShadow([r,v,n,l]);a.strokeRect(r+z,v,n-2*z,l);a.fillRect(r+z,v,n-2*z,l);j=j+l;if(g=="3d"){C=a.fillStyle;A=a.strokeStyle;a.beginPath();a.moveTo(r,v);a.lineTo(r+10,v-5);a.lineTo(r+10+n,v-5);a.lineTo(r+n,v);a.closePath();a.fill();a.stroke();a.beginPath();a.moveTo(r+n,v);a.lineTo(r+n+10,v-5);a.lineTo(r+
n+10,v-5+l);a.lineTo(r+n,v+l);a.closePath();a.fill();a.stroke();a.fillStyle="rgba(255,255,255,0.3)";a.beginPath();a.moveTo(r,v);a.lineTo(r+10,v-5);a.lineTo(r+10+n,v-5);a.lineTo(r+n,v);a.closePath();a.fill();a.stroke();a.fillStyle="rgba(0,0,0,0.4)";a.beginPath();a.moveTo(r+n,v);a.lineTo(r+n+10,v-5);a.lineTo(r+n+10,v-5+l);a.lineTo(r+n,v+l);a.closePath();a.fill();a.stroke();a.strokeStyle=A;a.fillStyle=C}if(l<0){l=Math.abs(l);v=v-l}this.coords.push([r+z,v,n-2*z,l]);typeof this.coords2[d]=="undefined"&&
(this.coords2[d]=[]);this.coords2[d].push([r+z,v,n-2*z,l]);b["chart.shadow"]&&q.push([r+z,v,n-2*z,l,a.fillStyle]);if(b["chart.labels.above"]){a.strokeStyle="rgba(0,0,0,0)";h&&RGraph.NoShadow(this);A=j-3;if(b["chart.labels.above.angle"]){C=-45;z="left";D="center"}else{C=0;z="center";D="bottom";if(this.data[d][w]<0||b["chart.xaxispos"]=="top"){A=v+l+6;D="top"}else A=v}a.fillStyle=typeof this.properties["chart.labels.above.color"]=="string"?b["chart.labels.above.color"]:b["chart.text.color"];RGraph.Text2(this,
{font:b["chart.text.font"],size:typeof b["chart.labels.above.size"]=="number"?b["chart.labels.above.size"]:b["chart.text.size"]-3,x:r+n/2,y:A-3,text:RGraph.number_format(this,this.data[d][w].toFixed(b["chart.labels.above.decimals"])),halign:z,valign:D,angle:C,tag:"labels.above"});if(h){a.shadowColor=i;a.shadowBlur=E;a.shadowOffsetX=f;a.shadowOffsetY=F}}}if(q.length){RGraph.NoShadow(this);a.lineWidth=b["chart.linewidth"];a.beginPath();for(var w=0;w<q.length;++w){a.fillStyle=q[w][4];a.strokeStyle=b["chart.strokecolor"];
a.fillRect(q[w][0],q[w][1],q[w][2],q[w][3]);a.strokeRect(q[w][0],q[w][1],q[w][2],q[w][3])}a.fill();a.stroke()}}else this.coords.push([]);a.closePath()}RGraph.NoShadow(this)};this.DrawLabels=function(){var c=this.canvas,a=this.context,b=this.properties,g=b["chart.text.size"],t=b["chart.labels"];if(b["chart.ylabels"]){b["chart.xaxispos"]=="top"&&this.Drawlabels_top();b["chart.xaxispos"]=="center"&&this.Drawlabels_center();b["chart.xaxispos"]=="bottom"&&this.Drawlabels_bottom()}if(typeof t=="object"&&
t){var u=Number(b["chart.xlabels.offset"]);if(b["chart.text.angle"]!=0)var e="center",d="right",h=0-b["chart.text.angle"];else{e="top";d="center";h=0}a.fillStyle=b["chart.text.color"];xTickGap=(c.width-this.gutterRight-this.gutterLeft)/t.length;var a=0,i=b["chart.text.font"];for(x=this.gutterLeft+xTickGap/2;x<=c.width-this.gutterRight;x=x+xTickGap)RGraph.Text2(this,{font:i,size:g,x:x,y:b["chart.xaxispos"]=="top"?this.gutterTop-u-5:c.height-this.gutterBottom+u+3,text:String(t[a++]),valign:b["chart.xaxispos"]==
"top"?"bottom":e,halign:d,tag:"label",marker:false,angle:h,tag:"labels"})}if(b["chart.labels.above.specific"]){t=b["chart.labels.above.specific"];for(a=0;a<this.coords.length;++a){c=b["chart.xaxispos"];g=this.coords[a];u=this.data_arr[a];e=u>=0&&c!="top"?"bottom":"top";d="center";(h=t[a])&&h.toString().length>0&&RGraph.Text2(this,{font:b["chart.text.font"],size:b["chart.labels.above.size"]?b["chart.labels.above.size"]:b["chart.text.size"],x:g[0]+g[2]/2,y:u>=0&&c!="top"?g[1]-5:g[1]+g[3]+3,text:String(t[a]),
valign:e,halign:d,tag:"labels.above"})}}};this.Drawlabels_top=function(){var c=this.canvas,a=this.context,b=this.properties;a.beginPath();a.fillStyle=b["chart.text.color"];a.strokeStyle="black";if(b["chart.xaxispos"]=="top"){var g=b["chart.text.size"],t=b["chart.units.pre"],u=b["chart.units.post"],e=b["chart.yaxispos"]=="left"?"right":"left",d=b["chart.text.font"];if(b["chart.ylabels.inside"]==true)var h=b["chart.yaxispos"]=="left"?this.gutterLeft+5:c.width-this.gutterRight-5,e=b["chart.yaxispos"]==
"left"?"left":"right",i=true;else{h=b["chart.yaxispos"]=="left"?this.gutterLeft-5:c.width-this.gutterRight+5;i=false}if(typeof b["chart.ylabels.specific"]=="object"&&b["chart.ylabels.specific"]){for(var f=RGraph.array_reverse(b["chart.ylabels.specific"]),a=c.height-this.gutterTop-this.gutterBottom,c=0;c<f.length;++c)RGraph.Text2(this,{font:d,size:g,x:h,y:this.gutterTop+a*(c/f.length)+a/f.length,text:String(f[c]),valign:"center",halign:e,bordered:i,tag:"scale"});return}f=this.scale2.labels;for(c=0;c<
f.length;++c)RGraph.Text2(this,{font:d,size:g,x:h,y:this.gutterTop+this.grapharea/f.length*(c+1),text:"-"+f[c],valign:"center",halign:e,bordered:i,tag:"scale"});if(b["chart.ymin"]!=0||b["chart.noxaxis"])RGraph.Text2(this,{font:d,size:g,x:h,y:this.gutterTop,text:(this.scale2.min!=0?"-":"")+RGraph.number_format(this,this.scale2.min.toFixed(b["chart.scale.decimals"]),t,u),valign:"center",halign:e,bordered:i,tag:"scale"})}a.fill()};this.Drawlabels_center=function(){var c=this.canvas,a=this.context,b=
this.properties,g=b["chart.text.font"],t=b["chart.ylabels.count"];a.fillStyle=b["chart.text.color"];if(b["chart.xaxispos"]=="center"){var d=b["chart.text.size"],e=b["chart.units.pre"],h=b["chart.units.post"],i="",f=0,m=false;a.fillStyle=b["chart.text.color"];a.strokeStyle="black";if(b["chart.ylabels.inside"]==true){f=b["chart.yaxispos"]=="left"?this.gutterLeft+5:c.width-this.gutterRight-5;i=b["chart.yaxispos"]=="left"?"left":"right";m=true}else{f=b["chart.yaxispos"]=="left"?this.gutterLeft-5:c.width-
this.gutterRight+5;i=b["chart.yaxispos"]=="left"?"right":"left";m=false}if(typeof b["chart.ylabels.specific"]=="object"&&b["chart.ylabels.specific"]){b=b["chart.ylabels.specific"];t=c.height-this.gutterTop-this.gutterBottom;for(c=0;c<b.length;++c){a=this.gutterTop+t/2/(b.length-1)*c;RGraph.Text2(this,{font:g,size:d,x:f,y:a,text:String(b[c]),valign:"center",halign:i,bordered:m,tag:"scale"})}for(c=b.length-1;c>=1;--c){a=this.gutterTop+t*(c/((b.length-1)*2))+t/2;s.Text2(this,{font:g,size:d,x:f,y:a,text:String(b[b.length-
c-1]),valign:"center",halign:i,bordered:m,tag:"scale"})}}else{for(c=0;c<this.scale2.labels.length;++c){var a=this.gutterTop+this.halfgrapharea-this.halfgrapharea/t*(c+1),o=this.scale2.labels[c];s.Text2(this,{font:g,size:d,x:f,y:a,text:o,valign:"center",halign:i,bordered:m,tag:"scale"})}for(c=this.scale2.labels.length-1;c>=0;--c){a=this.gutterTop+this.halfgrapharea/t*(c+1)+this.halfgrapharea;o=this.scale2.labels[c];s.Text2(this,{font:g,size:d,x:f,y:a,text:"-"+o,valign:"center",halign:i,bordered:m,
tag:"scale"})}this.scale2.min!=0&&s.Text2(this,{font:g,size:d,x:f,y:this.gutterTop+this.halfgrapharea,text:RGraph.number_format(this,this.scale2.min.toFixed(b["chart.scale.decimals"]),e,h),valign:"center",valign:"center",halign:i,bordered:m,tag:"scale"})}}};this.Drawlabels_bottom=function(){var c=this.context,a=this.canvas,b=this.properties,g=b["chart.text.size"],t=b["chart.units.pre"],d=b["chart.units.post"],e=b["chart.yaxispos"]=="left"?"right":"left",h=b["chart.text.font"],i=b["chart.ylabels.count"];
c.beginPath();c.fillStyle=b["chart.text.color"];c.strokeStyle="black";if(b["chart.ylabels.inside"]==true)var f=b["chart.yaxispos"]=="left"?this.gutterLeft+5:a.width-this.gutterRight-5,e=b["chart.yaxispos"]=="left"?"left":"right",m=true;else{f=b["chart.yaxispos"]=="left"?this.gutterLeft-5:a.width-this.gutterRight+5;m=false}if(b["chart.ylabels.specific"]&&typeof b["chart.ylabels.specific"]=="object")for(var c=b["chart.ylabels.specific"],a=a.height-this.gutterTop-this.gutterBottom,o=0;o<c.length;++o)RGraph.Text2(this,
{font:h,size:g,x:f,y:this.gutterTop+a*(o/(c.length-1)),text:c[o],valign:"center",halign:e,bordered:m,tag:"scale"});else{for(o=0;o<i;++o)RGraph.Text2(this,{font:h,size:g,x:f,y:this.gutterTop+this.grapharea-this.grapharea/i*(o+1),text:this.scale2.labels[o],valign:"center",halign:e,bordered:m,tag:"scale"});(b["chart.ymin"]!=0||b["chart.noxaxis"])&&s.Text2(this,{font:h,size:g,x:f,y:a.height-this.gutterBottom,text:s.number_format(this,this.scale2.min.toFixed(b["chart.scale.decimals"]),t,d),valign:"center",
halign:e,bordered:m,tag:"scale"});c.fill()}};this.DrawIEShadow=function(c){var a=this.context,b=this.properties,g=a.fillStyle,d=b["chart.shadow.offsetx"],h=b["chart.shadow.offsety"];a.lineWidth=b["chart.linewidth"];a.fillStyle=b["chart.shadow.color"];a.beginPath();a.fillRect(c[0]+d,c[1]+h,c[2],c[3]);a.fill();a.fillStyle=g};this.getShape=this.getBar=function(c,a){for(var b=a?a:this,g=RGraph.getMouseXY(c),d=g[0],h=g[1],e=b.coords,g=0,i=e.length;g<i;g=g+1)if(b.coords[g].length!=0){var f=e[g][0],m=e[g][1],
o=e[g][2],s=e[g][3],B=b.properties;if(d>=f&&d<=f+o&&h>=m&&h<=m+s){if(B["chart.tooltips"])var G=RGraph.parseTooltipText?RGraph.parseTooltipText(B["chart.tooltips"],g):B["chart.tooltips"][g];d=0;for(h=g;h>=(typeof b.data[d]=="object"&&b.data[d]?b.data[d].length:1);){h=typeof b.data[d]=="number"?h-1:b.data[d]?h-b.data[d].length:h-1;d++}typeof b.data[d]=="number"&&(h=null);return{"0":b,1:f,2:m,3:o,4:s,5:g,object:b,x:f,y:m,width:o,height:s,index:g,tooltip:G,index_adjusted:h,dataset:d}}}return null};this.getShapeByX=
function(c,a){for(var b=RGraph.getMouseXY(c),g=a?a:this,d=0,h=g.coords.length;d<h;d++)if(g.coords[d].length!=0){var e=b[0],f=g.coords[d][0],i=g.coords[d][1],m=g.coords[d][2],o=g.coords[d][3],s=g.properties;if(e>=f&&e<=f+m){if(s["chart.tooltips"])var B=RGraph.parseTooltipText?RGraph.parseTooltipText(s["chart.tooltips"],d):s["chart.tooltips"][d];return{"0":g,1:f,2:i,3:m,4:o,5:d,object:g,x:f,y:i,width:m,height:o,index:d,tooltip:B}}}return null};this.getValue=function(c){var a=this.canvas,b=this.properties;
if(c.length==2)var g=c[0];else{c=RGraph.getMouseXY(c);g=c[0]}c=c[1];if(c<b["chart.gutter.top"]||c>a.height-b["chart.gutter.bottom"]||g<b["chart.gutter.left"]||g>a.width-b["chart.gutter.right"])return null;if(b["chart.xaxispos"]=="center"){a=(this.grapharea/2-(c-b["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);a=a*2;a=a>=0?a+this.scale2.min:a-this.scale2.min}else if(b["chart.xaxispos"]=="top"){a=(this.grapharea-(c-b["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);
a=this.scale2.max-a;a=Math.abs(a)*-1}else{a=(this.grapharea-(c-b["chart.gutter.top"]))/this.grapharea*(this.scale2.max-this.scale2.min);a=a+this.scale2.min}return a};this.getYCoord=function(c){if(c>this.scale2.max)return null;var a=this.canvas,b=this.properties["chart.xaxispos"];if(b=="top"){c<0&&(c=Math.abs(c));c=(c-this.scale2.min)/(this.scale2.max-this.scale2.min)*this.grapharea;c=c+this.gutterTop}else if(b=="center"){c=(c-this.scale2.min)/(this.scale2.max-this.scale2.min)*(this.grapharea/2);c=
this.grapharea/2-c;c=c+this.gutterTop}else{if(c<this.scale2.min)c=this.scale2.min;c=(c-this.scale2.min)/(this.scale2.max-this.scale2.min)*this.grapharea;c=a.height-this.gutterBottom-c}return c};this.Highlight=function(c){RGraph.Highlight.Rect(this,c)};this.getObjectByXY=function(c){var a=this.canvas,b=this.properties,c=RGraph.getMouseXY(c);if(c[0]>=b["chart.gutter.left"]&&c[0]<=a.width-b["chart.gutter.right"]&&c[1]>=b["chart.gutter.top"]&&c[1]<=a.height-b["chart.gutter.bottom"])return this};this.Adjusting_mousemove=
function(c){if(h["chart.adjustable"]&&s.Registry.Get("chart.adjusting")&&s.Registry.Get("chart.adjusting").uid==this.uid){var a=Number(this.getValue(c)),b=this.getShapeByX(c);if(b){s.Registry.Set("chart.adjusting.shape",b);if(this.stackedOrGrouped&&h["chart.grouping"]=="grouped"){b=s.sequentialIndexToGrouped(b.index,this.data);typeof this.data[b[0]]=="number"?this.data[b[0]]=Number(a):s.is_null(this.data[b[0]])||(this.data[b[0]][b[1]]=Number(a))}else typeof this.data[b.index]=="number"&&(this.data[b.index]=
Number(a));s.RedrawCanvas(c.target);s.FireCustomEvent(this,"onadjust")}}};this.positionTooltip=function(c,a,b,g){var a=c.coords[g.__index__][0],d=c.coords[g.__index__][1],b=c.coords[g.__index__][2],h=c.coords[g.__index__][3],e=RGraph.getCanvasXY(c.canvas),f=g.offsetWidth,i=g.offsetHeight,c=c.data_arr[g.__index__];g.style.left=0;g.style.top=e[1]+d-i-7+"px";if(c<0)g.style.top=e[1]+d+h+7+"px";g.style.overflow="";d=new Image;d.style.position="absolute";d.id="__rgraph_tooltip_pointer__";if(c>=0){d.src=
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAFCAYAAACjKgd3AAAARUlEQVQYV2NkQAN79+797+RkhC4M5+/bd47B2dmZEVkBCgcmgcsgbAaA9GA1BCSBbhAuA/AagmwQPgMIGgIzCD0M0AMMAEFVIAa6UQgcAAAAAElFTkSuQmCC";d.style.top=g.offsetHeight-2+"px"}else{d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAFCAMAAACkeOZkAAAAK3RFWHRDcmVhdGlvbiBUaW1lAFNhdCA2IE9jdCAyMDEyIDEyOjQ5OjMyIC0wMDAw2S1RlgAAAAd0SU1FB9wKBgszM4Ed2k4AAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAEZ0FNQQAAsY8L/GEFAAAACVBMVEX/AAC9vb3//+92Pom0AAAAAXRSTlMAQObYZgAAAB1JREFUeNpjYAABRgY4YGRiRDCZYBwQE8qBMEEcAANCACqByy1sAAAAAElFTkSuQmCC";
d.style.top="-5px"}g.appendChild(d);if(e[0]+a+b/2-f/2<10){g.style.left=e[0]+a-f*0.1+b/2+"px";d.style.left=f*0.1-8.5+"px"}else if(e[0]+a+f/2>document.body.offsetWidth){g.style.left=e[0]+a-f*0.9+b/2+"px";d.style.left=f*0.9-8.5+"px"}else{g.style.left=e[0]+a+b/2-f*0.5+"px";d.style.left=f*0.5-8.5+"px"}};this.parseColors=function(){var c=this.properties,a=c["chart.colors"];if(a)for(var b=0;b<a.length;++b)a[b]=this.parseSingleColorForGradient(a[b]);if(a=c["chart.key.colors"])for(b=0;b<a.length;++b)a[b]=
this.parseSingleColorForGradient(a[b]);c["chart.crosshairs.color"]=this.parseSingleColorForGradient(c["chart.crosshairs.color"]);c["chart.highlight.stroke"]=this.parseSingleColorForGradient(c["chart.highlight.stroke"]);c["chart.highlight.fill"]=this.parseSingleColorForGradient(c["chart.highlight.fill"]);c["chart.text.color"]=this.parseSingleColorForGradient(c["chart.text.color"]);c["chart.background.barcolor1"]=this.parseSingleColorForGradient(c["chart.background.barcolor1"]);c["chart.background.barcolor2"]=
this.parseSingleColorForGradient(c["chart.background.barcolor2"]);c["chart.background.grid.color"]=this.parseSingleColorForGradient(c["chart.background.grid.color"]);c["chart.strokecolor"]=this.parseSingleColorForGradient(c["chart.strokecolor"]);c["chart.axis.color"]=this.parseSingleColorForGradient(c["chart.axis.color"])};this.parseSingleColorForGradient=function(c){if(!c||typeof c!="string")return c;if(c.match(/^gradient\((.*)\)$/i)){var a=RegExp.$1.split(":"),b=i.createLinearGradient(0,f.height-
h["chart.gutter.bottom"],0,h["chart.gutter.top"]),g=1/(a.length-1);b.addColorStop(0,s.trim(a[0]));for(var d=1,m=a.length;d<m;++d)b.addColorStop(d*g,RGraph.trim(a[d]))}return b?b:c};this.DrawBevel=function(){var c=this.coords,a=this.coords2,b=this.properties,d=this.context,h=this.canvas;if(b["chart.grouping"]=="stacked")for(var f=0;f<a.length;++f){if(a[f]&&a[f][0]&&a[f][0][0]){for(var e=a[f][0][0],i=a[f][0][1],m=a[f][0][2],c=[],b=0;b<a[f].length;++b)c.push(a[f][b][3]);var o=RGraph.array_sum(c);d.save();
d.strokeStyle="black";d.beginPath();d.rect(e,i,m,o);d.clip();d.shadowColor="black";d.shadowOffsetX=0;d.shadowOffsetY=0;d.shadowBlur=20;d.beginPath();d.rect(e-3,i-3,m+6,o+100);d.lineWidth=5;d.stroke();d.restore()}}else for(f=0;f<c.length;++f)if(c[f]){var e=c[f][0],i=c[f][1],m=c[f][2],o=c[f][3],a=b["chart.xaxispos"],s=(h.height-this.gutterTop-this.gutterBottom)/2+this.gutterTop;d.save();d.strokeStyle="black";d.beginPath();d.rect(e,i,m,o);d.clip();d.shadowColor="black";d.shadowOffsetX=0;d.shadowOffsetY=
0;d.shadowBlur=20;if(a=="top"||a=="center"&&i+o>s)i=i-100;o=o+100;d.beginPath();d.rect(e-3,i-3,m+6,o+6);d.lineWidth=5;d.stroke();d.restore()}};this.interactiveKeyHighlight=function(c){this.coords2.forEach(function(a){if(typeof a[c]=="object"&&a[c]){var b=a[c][0],d=a[c][1],f=a[c][2],a=a[c][3];i.fillStyle=h["chart.key.interactive.highlight.chart.fill"];i.strokeStyle=h["chart.key.interactive.highlight.chart.stroke"];i.lineWidth=2;i.fillRect(b,d,f,a);i.strokeRect(b,d,f,a)}})};RGraph.Register(this)}else alert("[BAR] No canvas support")};
RGraph.CombinedChart=function(){this.objects=[];var m=arguments;RGraph.is_array(arguments[0])&&(m=arguments[0]);for(var o=0;o<m.length;++o)if(this.objects[o]=m[o],this.objects[o].Set("chart.gutter.left",this.objects[0].Get("chart.gutter.left")),this.objects[o].Set("chart.gutter.right",this.objects[0].Get("chart.gutter.right")),this.objects[o].Set("chart.gutter.top",this.objects[0].Get("chart.gutter.top")),this.objects[o].Set("chart.gutter.bottom",this.objects[0].Get("chart.gutter.bottom")),"line"==
this.objects[o].type&&(this.objects[o].Set("chart.hmargin",(this.objects[0].canvas.width-this.objects[0].Get("chart.gutter.right")-this.objects[0].Get("chart.gutter.left"))/this.objects[0].data.length/2),this.objects[o].Set("chart.noaxes",!0),this.objects[o].Set("chart.background.grid",!1),this.objects[o].Set("chart.ylabels",!1)),this.objects[o].Get("chart.resizable"))var d=this.objects[o];d&&RGraph.AddCustomEventListener(d,"onresizebeforedraw",function(d){var m=d.Get("chart.gutter.left"),f=d.Get("chart.gutter.right");
d.Set("chart.hmargin",(d.canvas.width-m-f)/(2*d.original_data[0].length))})};RGraph.CombinedChart.prototype.Add=function(m){this.objects.push(m)};RGraph.CombinedChart.prototype.Draw=function(){for(var m=0;m<this.objects.length;++m)if("function"==typeof arguments[m])arguments[m](this.objects[m]);else this.objects[m].Draw()};
